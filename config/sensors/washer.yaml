- platform: template
  sensors:
    washer_time_left:
      friendly_name: "Time left for washing machine"
      value_template: >
        {% set time = (as_datetime(states('sensor.wasmachine_washer_completion_time')) - utcnow()).seconds %}
        {% set minutes = ((time % 3600) / 60) | int %}
        {% set hours = ((time % 86400) / 3600) | int %}
        {% set days = (time / 86400) | int %}

        {%- if time < 60 -%}
          Less than a minute
          {%- else -%}
          {%- if days > 0 -%}
            {{ days }} days
          {%- endif -%}
          {%- if hours > 0 -%}
            {%- if days > 0 -%}
              {{ ' ' }}
            {%- endif -%}
            {{ hours }} hours
          {%- endif -%}
          {%- if minutes > 0 -%}
            {%- if days > 0 or hours > 0 -%}
              {{ ' ' }}
            {%- endif -%}
            {{ minutes }} minutes
          {%- endif -%}
        {%- endif -%}

    washer_label:
      friendly_name: "Human-readable label for washing machine job state"
      value_template: "{{ states('sensor.wasmachine_washer_job_state') | title }}"
